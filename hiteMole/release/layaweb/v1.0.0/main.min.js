var Mole=function(){function e(e,t,i,n,a){this.normalState=e,this.hitState=t,this.downY=n,this.upY=this.normalState.y+5,this.scoreImg=i,this.scoreY=this.scoreImg.y,this.hitCallbancHd=a,this.reset(),this.normalState.on(Laya.Event.MOUSE_DOWN,this,this.hit)}return e.prototype.reset=function(){this.normalState.visible=!1,this.hitState.visible=!1,this.isShow=!1,this.isHit=!1,this.scoreImg.visible=!1},e.prototype.show=function(){this.isShow||(this.isShow=!0,this.normalState.y=this.downY,this.type=Math.random()<.3?1:2,this.normalState.skin="ui/mouse_normal_"+this.type+".png",this.hitState.skin="ui/mouse_hit_"+this.type+".png",this.scoreImg.skin="ui/score_"+this.type+".png",this.normalState.visible=!0,Laya.Tween.to(this.normalState,{y:this.upY},500,Laya.Ease.backOut,Laya.Handler.create(this,this.showComplete)))},e.prototype.showComplete=function(){this.isShow&&!this.isHit&&Laya.timer.once(2e3,this,this.hide)},e.prototype.hide=function(){this.isShow&&!this.isHit&&(this.isShow=!1,Laya.Tween.to(this.normalState,{y:this.downY},300,Laya.Ease.backIn,Laya.Handler.create(this,this.reset)))},e.prototype.hit=function(){this.isShow&&!this.isHit&&(this.isHit=!0,this.isShow=!1,Laya.timer.clear(this,this.hide),this.normalState.visible=!1,this.hitState.visible=!0,this.hitCallbancHd.runWith(this.type),Laya.timer.once(500,this,this.reset),this.showScore())},e.prototype.showScore=function(){this.scoreImg.y=this.scoreY+30,this.scoreImg.scale(0,0),this.scoreImg.visible=!0,Laya.Tween.to(this.scoreImg,{y:this.scoreY,scaleY:1,scaleX:1},300,Laya.Ease.backOut)},e}(),__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),View=laya.ui.View,Dialog=laya.ui.Dialog,ui;!function(e){var t=function(t){function i(){return t.call(this)||this}return __extends(i,t),i.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.createView(e.GameUI.uiView)},i.uiView={type:"View",props:{x:0,width:800,height:600},child:[{type:"Image",props:{y:25,x:25,skin:"ui/back.png"}},{type:"Box",props:{y:195,x:157,name:"item0"},child:[{type:"Image",props:{x:7,skin:"ui/mouse_normal_1.png",name:"normal"}},{type:"Image",props:{y:14,x:8,skin:"ui/mouse_hit_1.png",name:"hit"}},{type:"Image",props:{y:85,skin:"ui/mask-01.png"}},{type:"Image",props:{y:18,x:66,skin:"ui/score_2.png",name:"scoreImg",anchorY:.5,anchorX:.5}}]},{type:"Box",props:{y:191,x:345,name:"item1"},child:[{type:"Image",props:{x:7,skin:"ui/mouse_normal_1.png",name:"normal"}},{type:"Image",props:{y:14,x:8,skin:"ui/mouse_hit_1.png",name:"hit"}},{type:"Image",props:{y:85,skin:"ui/mask-02.png"}},{type:"Image",props:{y:18,x:66,skin:"ui/score_2.png",name:"scoreImg",anchorY:.5,anchorX:.5}}]},{type:"Box",props:{y:196,x:541,name:"item2"},child:[{type:"Image",props:{x:7,skin:"ui/mouse_normal_1.png",name:"normal"}},{type:"Image",props:{y:14,x:8,skin:"ui/mouse_hit_1.png",name:"hit"}},{type:"Image",props:{y:85,skin:"ui/mask-03.png"}},{type:"Image",props:{y:18,x:66,skin:"ui/score_2.png",name:"scoreImg",anchorY:.5,anchorX:.5}}]},{type:"Box",props:{y:280,x:127,name:"item3"},child:[{type:"Image",props:{x:7,skin:"ui/mouse_normal_1.png",name:"normal"}},{type:"Image",props:{y:14,x:8,skin:"ui/mouse_hit_1.png",name:"hit"}},{type:"Image",props:{y:85,skin:"ui/mask-04.png"}},{type:"Image",props:{y:18,x:66,skin:"ui/score_2.png",name:"scoreImg",anchorY:.5,anchorX:.5}}]},{type:"Box",props:{y:286,x:347,name:"item4"},child:[{type:"Image",props:{x:7,skin:"ui/mouse_normal_1.png",name:"normal"}},{type:"Image",props:{y:14,x:8,skin:"ui/mouse_hit_1.png",name:"hit"}},{type:"Image",props:{y:85,skin:"ui/mask-05.png"}},{type:"Image",props:{y:18,x:66,skin:"ui/score_2.png",name:"scoreImg",anchorY:.5,anchorX:.5}}]},{type:"Box",props:{y:282,x:545,name:"item5"},child:[{type:"Image",props:{x:7,skin:"ui/mouse_normal_1.png",name:"normal"}},{type:"Image",props:{y:14,x:8,skin:"ui/mouse_hit_1.png",name:"hit"}},{type:"Image",props:{y:85,skin:"ui/mask-06.png"}},{type:"Image",props:{y:18,x:66,skin:"ui/score_2.png",name:"scoreImg",anchorY:.5,anchorX:.5}}]},{type:"Box",props:{y:381,x:122,name:"item6"},child:[{type:"Image",props:{x:7,skin:"ui/mouse_normal_1.png",name:"normal"}},{type:"Image",props:{y:14,x:8,skin:"ui/mouse_hit_1.png",name:"hit"}},{type:"Image",props:{y:85,skin:"ui/mask-07.png"}},{type:"Image",props:{y:18,x:66,skin:"ui/score_2.png",name:"scoreImg",anchorY:.5,anchorX:.5}}]},{type:"Box",props:{y:387,x:347,name:"item7"},child:[{type:"Image",props:{x:7,skin:"ui/mouse_normal_1.png",name:"normal"}},{type:"Image",props:{y:14,x:8,skin:"ui/mouse_hit_1.png",name:"hit"}},{type:"Image",props:{y:85,skin:"ui/mask-08.png"}},{type:"Image",props:{y:18,x:66,skin:"ui/score_2.png",name:"scoreImg",anchorY:.5,anchorX:.5}}]},{type:"Box",props:{y:386,x:565,name:"item8"},child:[{type:"Image",props:{x:7,skin:"ui/mouse_normal_1.png",name:"normal"}},{type:"Image",props:{y:14,x:8,skin:"ui/mouse_hit_1.png",name:"hit"}},{type:"Image",props:{y:85,skin:"ui/mask-09.png"}},{type:"Image",props:{y:18,x:66,skin:"ui/score_2.png",name:"scoreImg",anchorY:.5,anchorX:.5}}]},{type:"ProgressBar",props:{y:8,x:7,var:"timeBar",skin:"ui/progress_time.png"}},{type:"Box",props:{y:45,x:18,var:"scoreNums"},child:[{type:"Clip",props:{skin:"ui/clip_number.png",name:"item0",clipX:10}},{type:"Clip",props:{x:18,skin:"ui/clip_number.png",name:"item1",clipX:10}},{type:"Clip",props:{x:36,skin:"ui/clip_number.png",name:"item2",clipX:10}},{type:"Clip",props:{x:54,skin:"ui/clip_number.png",name:"item3",clipX:10}},{type:"Clip",props:{x:72,skin:"ui/clip_number.png",name:"item4",clipX:10}},{type:"Clip",props:{x:90,skin:"ui/clip_number.png",name:"item5",clipX:10}},{type:"Clip",props:{x:108,skin:"ui/clip_number.png",name:"item6",clipX:10}},{type:"Clip",props:{x:126,skin:"ui/clip_number.png",name:"item7",clipX:10}},{type:"Clip",props:{x:144,skin:"ui/clip_number.png",name:"item8",clipX:10}},{type:"Clip",props:{x:162,skin:"ui/clip_number.png",name:"item9",clipX:10}}]}]},i}(View);e.GameUI=t}(ui||(ui={})),function(e){var t=function(t){function i(){return t.call(this)||this}return __extends(i,t),i.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.createView(e.GameOverUI.uiView)},i.uiView={type:"View",props:{width:500,height:400},child:[{type:"Image",props:{y:0,x:0,width:500,skin:"ui/overBg.png",sizeGrid:"14,19,14,16",height:400}},{type:"Image",props:{y:57,x:39,skin:"ui/total Score.png"}},{type:"Button",props:{y:292,x:161,var:"restartBtn",stateNum:2,skin:"ui/btn_restart.png"}},{type:"Box",props:{y:188,x:160,var:"scoreNums"},child:[{type:"Clip",props:{skin:"ui/clip_number.png",name:"item0",clipX:10}},{type:"Clip",props:{x:18,skin:"ui/clip_number.png",name:"item1",clipX:10}},{type:"Clip",props:{x:36,skin:"ui/clip_number.png",name:"item2",clipX:10}},{type:"Clip",props:{x:54,skin:"ui/clip_number.png",name:"item3",clipX:10}},{type:"Clip",props:{x:72,skin:"ui/clip_number.png",name:"item4",clipX:10}},{type:"Clip",props:{x:90,skin:"ui/clip_number.png",name:"item5",clipX:10}},{type:"Clip",props:{x:108,skin:"ui/clip_number.png",name:"item6",clipX:10}},{type:"Clip",props:{x:126,skin:"ui/clip_number.png",name:"item7",clipX:10}},{type:"Clip",props:{x:144,skin:"ui/clip_number.png",name:"item8",clipX:10}},{type:"Clip",props:{x:162,skin:"ui/clip_number.png",name:"item9",clipX:10}}]}]},i}(View);e.GameOverUI=t}(ui||(ui={})),function(e){var t=function(t){function i(){return t.call(this)||this}return __extends(i,t),i.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.createView(e.GameStartUI.uiView)},i.uiView={type:"View",props:{width:800,height:600},child:[{type:"Image",props:{y:55,x:38,skin:"ui/help.png"}},{type:"Button",props:{y:428,x:311,var:"startBtn",stateNum:2,skin:"ui/btn_start.png"}}]},i}(View);e.GameStartUI=t}(ui||(ui={})),function(e){var t=function(t){function i(){return t.call(this)||this}return __extends(i,t),i.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.createView(e.HammerUI.uiView)},i.uiView={type:"View",props:{width:100,height:100},child:[{type:"Image",props:{y:64,x:71,width:98,skin:"ui/hammer.png",rotation:20,pivotY:52,pivotX:57,height:77},compId:2}],animations:[{nodes:[{target:2,keyframes:{y:[{value:64,tweenMethod:"linearNone",tween:!0,target:2,key:"y",index:0},{value:66,tweenMethod:"linearNone",tween:!0,target:2,key:"y",index:1},{value:64,tweenMethod:"linearNone",tween:!0,target:2,key:"y",index:5}],x:[{value:71,tweenMethod:"linearNone",tween:!0,target:2,key:"x",index:0},{value:63,tweenMethod:"linearNone",tween:!0,target:2,key:"x",index:1},{value:71,tweenMethod:"linearNone",tween:!0,target:2,key:"x",index:5}],rotation:[{value:20,tweenMethod:"linearNone",tween:!0,target:2,key:"rotation",index:0},{value:-20,tweenMethod:"linearNone",tween:!0,target:2,key:"rotation",index:1},{value:20,tweenMethod:"linearNone",tween:!0,target:2,key:"rotation",index:5}]}}],name:"hit",id:1,frameRate:24,action:0}]},i}(View);e.HammerUI=t}(ui||(ui={}));var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),GameOver=function(e){function t(){var t=e.call(this)||this;return t.restartBtn.on(Laya.Event.CLICK,t,t.restartGame),t}return __extends(t,e),t.prototype.restartGame=function(){this.removeSelf(),GameMain.gameView.removeSelf(),Laya.stage.addChild(GameMain.gameStart)},t.prototype.showScore=function(e){for(var t={},i=e,n=9;n>=0;n--)t["item"+n]={index:Math.floor(i%10)},i/=10;this.scoreNums.dataSource=t},t}(ui.GameOverUI),__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),GameStart=function(e){function t(){var t=e.call(this)||this;return t.startBtn.on(Laya.Event.CLICK,t,t.start),t}return __extends(t,e),t.prototype.start=function(){GameMain.gameView||(GameMain.gameView=new GameView),GameMain.gameStart.removeSelf(),GameMain.gameView.centerX=0,Laya.stage.addChild(GameMain.gameView),GameMain.gameView.gameStart()},t}(ui.GameStartUI),__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Browser=Laya.Browser,GameView=function(e){function t(){var t=e.call(this)||this;t.moleNumber=9,t.moles=new Array;for(var i=Laya.Handler.create(t,t.setScore,null,!1),n=0;n<t.moleNumber;n++){var a=t.getChildByName("item"+n),o=new Mole(a.getChildByName("normal"),a.getChildByName("hit"),a.getChildByName("scoreImg"),20,i);t.moles.push(o)}return t.hammer=new Hammer,t.hammer.zOrder=2,t.hammer.visible=!1,t}return __extends(t,e),t.prototype.onLoop=function(){if(this.timeBar.value-=.1,this.timeBar.value<=0)return void this.gameOver();var e=Math.floor(Math.random()*this.moleNumber);this.moles[e].show()},t.prototype.gameStart=function(){this.timeBar.value=1,this.score=0,GameMain.gameView.updateScoreUI(),Laya.stage.addChild(this.hammer),Laya.timer.loop(1e3,this,this.onLoop),this.hammer.star()},t.prototype.gameOver=function(){Laya.timer.clear(this,this.onLoop),this.hammer.end(),GameMain.gameOver||(GameMain.gameOver=new GameOver),GameMain.gameOver.centerX=0,GameMain.gameOver.centerY=50,Laya.stage.addChild(GameMain.gameOver),GameMain.gameOver.showScore(this.score)},t.prototype.setScore=function(e){this.score+=1===e?-100:100,this.score<=0&&(this.score=0),this.updateScoreUI()},t.prototype.updateScoreUI=function(){for(var e={},t=this.score,i=9;i>=0;i--)e["item"+i]={index:Math.floor(t%10)},t/=10;this.scoreNums.dataSource=e},t}(ui.GameUI),__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Hammer=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.star=function(){Laya.Mouse.hide(),this.visible=!0,Laya.stage.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown),Laya.stage.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove),this.onMouseMove()},t.prototype.end=function(){this.visible=!1,Laya.Mouse.show()},t.prototype.onMouseDown=function(){this.hit.play(1,!1)},t.prototype.onMouseMove=function(){this.pos(Laya.stage.mouseX-this.width/2,Laya.stage.mouseY-this.height/2)},t}(ui.HammerUI),GameMain=function(){function e(){Laya.init(800,600,Laya.WebGL),Laya.stage.bgColor="#ffcccc",Laya.stage.scaleMode=Laya.Stage.SCALE_FIXED_HEIGHT,Laya.stage.alignH=Laya.Stage.ALIGN_CENTER,Laya.stage.alignV=Laya.Stage.ALIGN_MIDDLE,Laya.stage.screenMode=Laya.Stage.SCREEN_HORIZONTAL;var e=[{url:"res/atlas/ui.atlas",type:Laya.Loader.ATLAS},{url:"ui/back.png",type:Laya.Loader.IMAGE},{url:"ui/help.png",type:Laya.Loader.IMAGE}];Laya.loader.load(e,Laya.Handler.create(this,this.onLoaded))}return e.prototype.onLoaded=function(){e.gameStart=new GameStart,e.gameStart.centerX=0,Laya.stage.addChild(e.gameStart)},e}();new GameMain;